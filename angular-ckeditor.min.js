!function(a,b){"function"==typeof define&&define.amd?define(["angular","underscore"],b):b(angular,_)}(this,function(a,b){function c(a){return{restrict:"A",require:["ckeditor","ngModel"],controller:["$scope","$element","$attrs","$parse","$q","ckeditorSettings",d],link:function(b,c,d,f){var g=f[0],h=f[1];g.ready().then(function(){["dataReady","key","change","saveSnapshot"].forEach(function(a){g.$on(a,function(){h.$setViewValue(g.instance.getData()||"")})}),g.instance.setReadOnly(!1),e(function(){a(d.ready)(b)})}),h.$render=function(){g.ready().then(function(){g.instance.setData(h.$viewValue||"")})}}}}function d(a,c,d,f,g,h){var i=f(d.ckeditor)(a)||{};i=b.defaults({},i,h);var j,k=c[0];j=this.instance=k.hasAttribute("contenteditable")&&"true"==k.getAttribute("contenteditable").toLowerCase()||i.inline?CKEDITOR.inline(k,i):CKEDITOR.replace(k,i),i.instance&&a.$eval(i.instance+" = i",{i:j}),i.focused&&(j.on("focus",function(){a.$apply(function(){a.$eval(i.focused+" = true")})}),j.on("blur",function(){a.$apply(function(){a.$eval(i.focused+" = false")})})),this.$on=function(b,c){function d(){var a=arguments;e(function(){f.apply(null,a)})}function f(){var b=arguments;a.$apply(function(){c.apply(null,b)})}return j.on(b,d),function(){j.removeListener(b,f)}},this.ready=function(){if(this.readyDefer)return this.readyDefer.promise;var a=this.readyDefer=g.defer();return"ready"===this.instance.status?a.resolve():this.$on("instanceReady",a.resolve),a.promise},a.$on("$destroy",function(){j.destroy(!1)})}a.module("ckeditor",[]).provider("ckeditorSettings",function(){this.settings={},this.$get=function(){return this.settings},this.set=function(a){b.extend(this.settings,a)}}).directive("ckeditor",["$parse",c]);var e=window&&window.setImmediate?window.setImmediate:function(a){setTimeout(a,0)}});
//# sourceMappingURL=angular-ckeditor.min.map